<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of colorbar_labeled</title>
  <meta name="keywords" content="colorbar_labeled">
  <meta name="description" content="COLORBAR_LABELED - colorbar with label for range linear or log">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html AURORA --><!-- menu.html tools -->
<h1>colorbar_labeled
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>COLORBAR_LABELED - colorbar with label for range linear or log</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function handle=colorbar_labeled(label,lg,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> COLORBAR_LABELED - colorbar with label for range linear or log
 scale. 
 
 Calling:
   handle=colorbar_labeled(label,lg)
 Input:
   label - string with text
   lg    - string [ {'linear'} | 'log' ] for scale type</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../AURORA/Documentation/N2O2O_phase_function_plot.html" class="code" title="">N2O2O_phase_function_plot</a>	% Phase-function-plots</li><li><a href="../../AURORA/Documentation/etrp_scattering.html" class="code" title="">etrp_scattering</a>	% Script illustrating (elastic) scattering</li><li><a href="../../AURORA/Documentation/etrp_scattering2.html" class="code" title="">etrp_scattering2</a>	% Script illustrating (elastic) scattering</li><li><a href="../../AURORA/Plotting/Fig_PnL5n6.html" class="code" title="">Fig_PnL5n6</a>	% Reproduce Differential-flux-plots of Peticolas and Lummerzheim</li><li><a href="../../AURORA/Plotting/Fig_PnL_VEMCEM.html" class="code" title="">Fig_PnL_VEMCEM</a>	% Reproduce Volume and column emission plot of Peticolas and Lummerzheim</li><li><a href="../../AURORA/Plotting/animate_IeEztE_3DEzoft.html" class="code" title="function output = animate_IeEztE_3DEzoft(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut)">animate_IeEztE_3DEzoft</a>	animate_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/animate_IeEztE_3DtEofz.html" class="code" title="function output = animate_IeEztE_3DtEofz(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut,scaleFCN)">animate_IeEztE_3DtEofz</a>	animate_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/animate_IeztE_3DEthetaoft.html" class="code" title="function output = animate_IeztE_3DEthetaoft(t,h_atm,E,Ie_ztE,dE,BeamSA,mu_lims,cx_lims,spp, theta_strs,movieOut)">animate_IeztE_3DEthetaoft</a>	animate_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/animate_IeztE_3DEzoft.html" class="code" title="function output = animate_IeztE_3DEzoft(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut)">animate_IeztE_3DEzoft</a>	animate_IeztE_3DtzofE - animation of time-varying electron flux</li><li><a href="../../AURORA/Plotting/animate_IeztE_3DtEofz.html" class="code" title="function output = animate_IeztE_3DtEofz(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut)">animate_IeztE_3DtEofz</a>	animate_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/animate_IeztE_3DtlinEofz.html" class="code" title="function output = animate_IeztE_3DtlinEofz(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut)">animate_IeztE_3DtlinEofz</a>	animate_IeEztE_3DtlinEofz - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/animate_IeztE_3DtzofE.html" class="code" title="function output = animate_IeztE_3DtzofE(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,movieOut)">animate_IeztE_3DtzofE</a>	animate_IeztE_3DtzofE - animation of time-varying electron flux</li><li><a href="../../AURORA/Plotting/plot_IeEztE_3DEzoft.html" class="code" title="function output = plot_IeEztE_3DEzoft(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_t)">plot_IeEztE_3DEzoft</a>	plot_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/plot_IeEztE_3DtEofz.html" class="code" title="function output = plot_IeEztE_3DtEofz(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_z)">plot_IeEztE_3DtEofz</a>	plot_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/plot_IeztE_3DEthetaoft.html" class="code" title="function output = plot_IeztE_3DEthetaoft(t,h_atm,E,Ie_ztE,dE,BeamSA,mu_lims,cx_lims,spp, theta_strs,movieOut)">plot_IeztE_3DEthetaoft</a>	plot_IeztE_3DEthetaoft - pitch-angle plot of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/plot_IeztE_3DEzoft.html" class="code" title="function output = plot_IeztE_3DEzoft(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_t)">plot_IeztE_3DEzoft</a>	plot_IeztE_3DtzofE - animation of time-varying electron flux</li><li><a href="../../AURORA/Plotting/plot_IeztE_3DtEofz.html" class="code" title="function output = plot_IeztE_3DtEofz(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_z)">plot_IeztE_3DtEofz</a>	plot_IeEztE_3DtzofE - animation of time-varying electron energy flux</li><li><a href="../../AURORA/Plotting/plot_IeztE_3DtzofE.html" class="code" title="function H = plot_IeztE_3DtzofE(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_E)">plot_IeztE_3DtzofE</a>	plot_IeztE_3DtzofE - animation of time-varying electron flux</li><li><a href="../../AURORA/Plotting/plot_IeztE_3DtzofE0.html" class="code" title="function output = plot_IeztE_3DtzofE0(t,h_atm,E,Ie_ztE,dE,BeamSA,cx_lims,spp, theta_strs,idx_E)">plot_IeztE_3DtzofE0</a>	plot_IeztE_3DtzofE - animation of time-varying electron flux</li><li><a href="../../AURORA/Plotting/threeDplot1stream.html" class="code" title="">threeDplot1stream</a>	% Script producing a 3-cuts plot</li><li><a href="../../AURORA/setup4etrptd10streams.html" class="code" title="">setup4etrptd10streams</a>	% Set-up script for Examples in time-dependent electron transport</li><li><a href="../../AURORA/sup-scripts/make_all_IQ_lambda_plots.html" class="code" title="">make_all_IQ_lambda_plots</a>	% Volume and Column intensity-plots</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function handle=colorbar_labeled(label,lg,varargin)</a>
0002 <span class="comment">% COLORBAR_LABELED - colorbar with label for range linear or log</span>
0003 <span class="comment">% scale.</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% Calling:</span>
0006 <span class="comment">%   handle=colorbar_labeled(label,lg)</span>
0007 <span class="comment">% Input:</span>
0008 <span class="comment">%   label - string with text</span>
0009 <span class="comment">%   lg    - string [ {'linear'} | 'log' ] for scale type</span>
0010 
0011 <span class="keyword">if</span> nargin &lt; 2 || isempty(lg),
0012   lg = <span class="string">'linear'</span>;
0013 <span class="keyword">end</span>
0014 
0015 <span class="comment">% Determine color limits by context.  If any axes child is an image</span>
0016 <span class="comment">% use scale based on size of colormap, otherwise use current CAXIS.</span>
0017 
0018 t = caxis;
0019 
0020 h = gca;
0021 
0022 <span class="comment">% Search for existing colorbar</span>
0023 ch = get(gcf,<span class="string">'children'</span>);
0024 ax = [];
0025 <span class="keyword">try</span>
0026   <span class="keyword">for</span> i = 1:length(ch),
0027     d = get(ch(i),<span class="string">'userdata'</span>);
0028     <span class="keyword">if</span> numel(d) == 1 &amp;&amp; d == h
0029       ax = ch(i);
0030       <span class="keyword">break</span>
0031     <span class="keyword">end</span>
0032   <span class="keyword">end</span>
0033 <span class="keyword">catch</span>
0034   <span class="comment">% Dont know what to do around here...</span>
0035 <span class="keyword">end</span>
0036 
0037 <span class="keyword">if</span> strcmp(get(gcf,<span class="string">'NextPlot'</span>),<span class="string">'replace'</span>),
0038   set(gcf,<span class="string">'NextPlot'</span>,<span class="string">'add'</span>)
0039   wasNextplotReplace = 1;
0040 <span class="keyword">else</span>
0041   wasNextplotReplace = 0;
0042 <span class="keyword">end</span>
0043 
0044 
0045 <span class="keyword">if</span> isempty(ax)
0046   pos = get(h,<span class="string">'Position'</span>);
0047 <span class="comment">% stripe=0.03; edge=0.08;</span>
0048 <span class="comment">% [az,el]=view;</span>
0049 <span class="comment">% if all([az,el]==[0 90]), space=0.02; else, space=.1; end</span>
0050 <span class="comment">% set(h,'Position',[pos(1) pos(2) pos(3)*(1-stripe-edge-space) pos(4)])</span>
0051 <span class="comment">% rect=[pos(1)+(1-stripe-edge)*pos(3) pos(2) stripe*pos(3) pos(4)];</span>
0052   rect = [pos(1)+1.02*pos(3) pos(2) .035*pos(3) pos(4)];
0053 
0054   <span class="comment">% Create axes for stripe</span>
0055   ax = axes(<span class="string">'Position'</span>, rect);
0056 <span class="keyword">else</span>
0057   axes(ax)
0058 <span class="keyword">end</span>
0059 
0060 <span class="keyword">if</span> ~isempty(varargin)
0061   fszi = find_in_cellstr(<span class="string">'fontsize'</span>,varargin);
0062   <span class="keyword">if</span> ~isempty(fszi)
0063     fsz = varargin{fszi+1}-2;
0064   <span class="keyword">else</span>
0065     fsz = get(gca,<span class="string">'fontsize'</span>);
0066   <span class="keyword">end</span>
0067 <span class="keyword">else</span>
0068   fsz = get(gca,<span class="string">'fontsize'</span>);
0069 <span class="keyword">end</span>
0070 <span class="comment">% Create color stripe</span>
0071 cmap = colormap;
0072 n = size(cmap,1);
0073 <span class="keyword">if</span> strcmp(lg,<span class="string">'log'</span>)
0074   tt=((0:n)-.5)'*diff(t)/(n-1)+t(1);
0075   surface([0 1],10.^tt,[tt tt]),shading flat
0076   set(ax,<span class="string">'CLim'</span>,t,<span class="string">'ylim'</span>,10.^t,<span class="string">'yscale'</span>,<span class="string">'log'</span>,<span class="string">'layer'</span>,<span class="string">'top'</span>,<span class="string">'fontsize'</span>,fsz)
0077   <span class="comment">%surface([0 1],tt,[tt tt]),shading flat</span>
0078   <span class="comment">%set(ax,'CLim',t,'ylim',t,'yscale','log','layer','top','fontsize',fsz)</span>
0079 <span class="keyword">else</span>
0080   <span class="comment">%image([0 1],t,[1:n]'),</span>
0081   tt=((0:n)-.5)'*diff(t)/(n-1)+t(1);
0082   surface([0 1],tt,[tt tt]),shading flat
0083   set(ax,<span class="string">'CLim'</span>,t,<span class="string">'ylim'</span>,t,<span class="string">'yscale'</span>,<span class="string">'linear'</span>,<span class="string">'layer'</span>,<span class="string">'top'</span>,<span class="string">'fontsize'</span>,fsz)
0084 <span class="comment">% set(ax,'TickDir','in')</span>
0085   set(ax,<span class="string">'ylim'</span>,t,<span class="string">'Ydir'</span>,<span class="string">'normal'</span>)
0086 <span class="comment">% Justify color axis</span>
0087 <span class="comment">% set(ax,'yticklabel',strjust(get(ax,'yticklabel')))</span>
0088 <span class="keyword">end</span>
0089 
0090 set(ax,<span class="string">'userdata'</span>,h,<span class="string">'YaxisLoc'</span>,<span class="string">'right'</span>,<span class="string">'xtick'</span>,[])
0091   ylabel(label,<span class="string">'Rotation'</span>,-90,<span class="string">'VerticalAlignment'</span>,<span class="string">'baseline'</span>,varargin{:})
0092 set(gcf,<span class="string">'CurrentAxes'</span>,h)
0093 
0094 <span class="keyword">if</span> wasNextplotReplace == 1
0095   set(gcf,<span class="string">'Nextplot'</span>,<span class="string">'Replace'</span>)
0096 <span class="keyword">end</span>
0097 
0098 <span class="keyword">if</span> nargout &gt; 0, 
0099   handle = ax;
0100 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 18-Nov-2019 14:53:30 by <strong>B.&nbsp;Gustavsson</strong> with <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>