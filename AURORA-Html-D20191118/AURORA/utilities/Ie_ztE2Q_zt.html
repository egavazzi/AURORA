<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of Ie_ztE2Q_zt</title>
  <meta name="keywords" content="Ie_ztE2Q_zt">
  <meta name="description" content="IE_ZTE2Q_ZT - Calculate the volume emission/excitation rates">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html AURORA --><!-- menu.html utilities -->
<h1>Ie_ztE2Q_zt
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>IE_ZTE2Q_ZT - Calculate the volume emission/excitation rates</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function ThatWentOK = Ie_ztE2Q_zt(nN2,nO2,nO,h_atm) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> IE_ZTE2Q_ZT - Calculate the volume emission/excitation rates
   Ie_ztE2Q_zt loads all electron-fluxes in a directory and
   calculates volume emission and excitation-rates for the auroral
   emissions at 4278 � 6730 � 7774 � 8446 � and the O1D, O1S
   and the N2A3 excitation rates. The function automatically
   handles the calculations of excitation cross-sections etc.
 
 Calling:
  ThatWentOK = Ie_ztE2Q_zt(nN2,nO2,nO,h_atm)
 Input:
  nN2 - molecular nitrogen number-density (/m^3) profiles [nZ x 1]
  nO2 - molecular oxygen number-density (/m^3) profiles [nZ x 1]
  nO  - atomic oxygen number-density (/m^3) profiles [nZ x 1]
  h_atm - altitude profils [m], [nZ x 1]
 Output
  ThatWentOK - bolean output, returns 1 if processing worked out</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../AURORA/Data_electron/exc_4278.html" class="code" title="function sigma = exc_4278(E)">exc_4278</a>	Xs = exc_4278(E)</li><li><a href="../../AURORA/Data_electron/exc_6730_N2.html" class="code" title="function sigma = exc_6730_N2(E)">exc_6730_N2</a>	EI_6730_N2 - Xs = exc_6730_N2(E)</li><li><a href="../../AURORA/Data_electron/exc_7774_O.html" class="code" title="function sigma = exc_7774_O(E)">exc_7774_O</a>	EI_7774_O - Xs = exc_7774_O(E)</li><li><a href="../../AURORA/Data_electron/exc_7774_O2.html" class="code" title="function sigma = exc_7774_O2(E)">exc_7774_O2</a>	EXC_7774_O2 - Xs = exc_7774_O2(E)</li><li><a href="../../AURORA/Data_electron/exc_8446_O.html" class="code" title="function sigma = exc_8446_O(E)">exc_8446_O</a>	Xs = exc_8446(E)</li><li><a href="../../AURORA/Data_electron/exc_8446_O2.html" class="code" title="function sigma = exc_8446_O2(E)">exc_8446_O2</a>	Xs = exc_8446_O2(E)</li><li><a href="../../AURORA/Data_electron/exc_O1D.html" class="code" title="function X_o1d = exc_O1D(E)">exc_O1D</a>	EXC_O1D - O1D excitation cross section</li><li><a href="../../AURORA/Data_electron/exc_O1S.html" class="code" title="function X_o1s = exc_O1S(E)">exc_O1S</a>	EXC_O1S - O1S excitation cross section</li><li><a href="../../AURORA/e_transport_Ms/mu_avg.html" class="code" title="function c_o_mu = mu_avg(mu_lims)">mu_avg</a>	MU_AVG - pitch-angle averages between limits of cosine-of-pitch-angles</li><li><a href="Ie2currents.html" class="code" title="function [J_down,J_up,IeEdown,IeEup] = Ie2currents(t,h_atm,E,Ie_ztE,c_o_mu,idx_z)">Ie2currents</a>	Ie2currents - calculate current from multistream electron fluxes</li><li><a href="Ie_ztE_loader.html" class="code" title="function [t,h_atm,E,mu_lims,IeZTE,mu_scatterings] = Ie_ztE_loader(data_paths,ops)">Ie_ztE_loader</a>	Ie_ztE_loader reads flickering-aurora data from the</li><li><a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>	EXC_TZ_OF_IE_ZTE - volume excitation rate altitude-time variation</li><li><a href="get_all_xs.html" class="code" title="function [Xs,xs_fcn] = get_all_xs(name,E)">get_all_xs</a>	GET_ALL_XS - collect all electron-neutral impact cross sections</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../AURORA/sup-scripts/make_all_Q_lambda.html" class="code" title="">make_all_Q_lambda</a>	% Volume-emission-calculations</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function ThatWentOK = Ie_ztE2Q_zt(nN2,nO2,nO,h_atm)</a>
0002 <span class="comment">% IE_ZTE2Q_ZT - Calculate the volume emission/excitation rates</span>
0003 <span class="comment">%   Ie_ztE2Q_zt loads all electron-fluxes in a directory and</span>
0004 <span class="comment">%   calculates volume emission and excitation-rates for the auroral</span>
0005 <span class="comment">%   emissions at 4278 � 6730 � 7774 � 8446 � and the O1D, O1S</span>
0006 <span class="comment">%   and the N2A3 excitation rates. The function automatically</span>
0007 <span class="comment">%   handles the calculations of excitation cross-sections etc.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% Calling:</span>
0010 <span class="comment">%  ThatWentOK = Ie_ztE2Q_zt(nN2,nO2,nO,h_atm)</span>
0011 <span class="comment">% Input:</span>
0012 <span class="comment">%  nN2 - molecular nitrogen number-density (/m^3) profiles [nZ x 1]</span>
0013 <span class="comment">%  nO2 - molecular oxygen number-density (/m^3) profiles [nZ x 1]</span>
0014 <span class="comment">%  nO  - atomic oxygen number-density (/m^3) profiles [nZ x 1]</span>
0015 <span class="comment">%  h_atm - altitude profils [m], [nZ x 1]</span>
0016 <span class="comment">% Output</span>
0017 <span class="comment">%  ThatWentOK - bolean output, returns 1 if processing worked out</span>
0018 
0019 <span class="comment">%   Copyright � 2018-2019 Bjorn Gustavsson, &lt;bjorn.gustavsson@uit.no&gt;</span>
0020 <span class="comment">%   This is free software, licensed under GNU GPL version 2 or later</span>
0021 
0022 
0023 
0024 <span class="keyword">try</span>
0025   [t,h_atm,E,mu_lims,Ie_ZTE] = <a href="Ie_ztE_loader.html" class="code" title="function [t,h_atm,E,mu_lims,IeZTE,mu_scatterings] = Ie_ztE_loader(data_paths,ops)">Ie_ztE_loader</a>({<span class="string">'.'</span>});
0026   szIzte = size(Ie_ZTE);
0027   <span class="comment">% load neutral_atm.mat</span>
0028   
0029   emXS4278 = <a href="../../AURORA/Data_electron/exc_4278.html" class="code" title="function sigma = exc_4278(E)">exc_4278</a>(E);
0030   emXS6730 = <a href="../../AURORA/Data_electron/exc_6730_N2.html" class="code" title="function sigma = exc_6730_N2(E)">exc_6730_N2</a>(E);
0031   emXS8446_O = <a href="../../AURORA/Data_electron/exc_8446_O.html" class="code" title="function sigma = exc_8446_O(E)">exc_8446_O</a>(E);
0032   emXS8446_O2 = <a href="../../AURORA/Data_electron/exc_8446_O2.html" class="code" title="function sigma = exc_8446_O2(E)">exc_8446_O2</a>(E);
0033   emX7774_O = <a href="../../AURORA/Data_electron/exc_7774_O.html" class="code" title="function sigma = exc_7774_O(E)">exc_7774_O</a>(E);
0034   emX7774_O2 = <a href="../../AURORA/Data_electron/exc_7774_O2.html" class="code" title="function sigma = exc_7774_O2(E)">exc_7774_O2</a>(E);
0035   excXS_O1D = <a href="../../AURORA/Data_electron/exc_O1D.html" class="code" title="function X_o1d = exc_O1D(E)">exc_O1D</a>(E);
0036   excXS_O1S = <a href="../../AURORA/Data_electron/exc_O1S.html" class="code" title="function X_o1s = exc_O1S(E)">exc_O1S</a>(E);
0037   dE = diff(E);
0038   dE = dE([1:<span class="keyword">end</span>,end]);
0039   XsO  = <a href="get_all_xs.html" class="code" title="function [Xs,xs_fcn] = get_all_xs(name,E)">get_all_xs</a>(<span class="string">'O'</span>,E+dE/2);
0040   XsO2 = <a href="get_all_xs.html" class="code" title="function [Xs,xs_fcn] = get_all_xs(name,E)">get_all_xs</a>(<span class="string">'O2'</span>,E+dE/2);
0041   XsN2 = <a href="get_all_xs.html" class="code" title="function [Xs,xs_fcn] = get_all_xs(name,E)">get_all_xs</a>(<span class="string">'N2'</span>,E+dE/2);
0042   load N2_levels.dat
0043   load O2_levels.dat
0044   load O_levels.dat
0045   XsOi = O_levels(:,2)'*XsO;
0046   XsO2i = O2_levels(:,2)'*XsO2;
0047   XsN2i = N2_levels(:,2)'*XsN2;
0048   XsN2A3 = XsN2(13,:);
0049   
0050   Q4278 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nN2,emXS4278(1:szIzte(3)));
0051   
0052   Q6730 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nN2,emXS6730(1:szIzte(3)));
0053   
0054   Q8446 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,emXS8446_O(1:szIzte(3))) + <span class="keyword">...</span>
0055           <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO2,emXS8446_O2(1:szIzte(3)));
0056   Q7774 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,emX7774_O(1:szIzte(3))) + <span class="keyword">...</span>
0057           <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO2,emX7774_O2(1:szIzte(3)));
0058   
0059   Q8446_O = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,emXS8446_O(1:szIzte(3)));
0060   Q7774_O = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,emX7774_O(1:szIzte(3)));
0061 
0062   Q8446_O2 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO2,emXS8446_O2(1:szIzte(3)));
0063   Q7774_O2 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO2,emX7774_O2(1:szIzte(3)));
0064   
0065   QO1D = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,excXS_O1D(1:szIzte(3)));
0066   QO1S = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,excXS_O1S(1:szIzte(3)));
0067 
0068   QN2i = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nN2,XsN2i(1:szIzte(3)));
0069   QO2i = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO2,XsO2i(1:szIzte(3)));
0070   QOi = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nO,XsOi(1:szIzte(3)));
0071   
0072   QN2A3 = <a href="exc_tz_of_Ie_ztE.html" class="code" title="function Q = exc_tz_of_Ie_ztE(t,h_atm,E,Ie_tzE,n,Xs)">exc_tz_of_Ie_ztE</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,nN2,XsN2A3(1:szIzte(3)));
0073   
0074   save Qzt_all_L.mat t h_atm Q4278 Q6730 Q8446 Q7774 QO1D QO1S QN2i QN2A3 QO2i QOi Q8446_O Q7774_O Q8446_O2 Q7774_O2
0075   
0076   c_o_mu = <a href="../../AURORA/e_transport_Ms/mu_avg.html" class="code" title="function c_o_mu = mu_avg(mu_lims)">mu_avg</a>(mu_lims);
0077   idx_z = numel(h_atm);
0078   [J_down,J_up,IeEdown,IeEup] = <a href="Ie2currents.html" class="code" title="function [J_down,J_up,IeEdown,IeEup] = Ie2currents(t,h_atm,E,Ie_ztE,c_o_mu,idx_z)">Ie2currents</a>(t,h_atm,E(1:szIzte(3)),Ie_ZTE,c_o_mu,idx_z);
0079   save J.mat t J_down J_up IeEdown IeEup
0080   
0081   ThatWentOK = 1;
0082 
0083 <span class="keyword">catch</span>
0084   ThatWentOK = 0;
0085 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 18-Nov-2019 14:53:30 by <strong>B.&nbsp;Gustavsson</strong> with <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>