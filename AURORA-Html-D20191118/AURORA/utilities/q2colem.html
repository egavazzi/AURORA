<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of q2colem</title>
  <meta name="keywords" content="q2colem">
  <meta name="description" content="Q2COLEM - Integrate volume excitation-rates to column emission">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html AURORA --><!-- menu.html utilities -->
<h1>q2colem
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Q2COLEM - Integrate volume excitation-rates to column emission</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function I_lambda = q2colem(t,h,Q,A,tau) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Q2COLEM - Integrate volume excitation-rates to column emission
  Q2COLEM integrates altitude-time varying volume excitation-rates
  to column intensities, taking the speed-of-light into
  account.
 
 Calling:
  I_lambda = q2colem(t,h,Q,[A],[tau])
 Input:
  t   - time (s), double array [1 x n_t]
  h   - distance along magnetic field (m), double array [n_z x 1]
  Q   - Volume excitation-rate (/m^3/s), double array [n_z x n_t]
  A   - Einstein coefficiend (1/s), double scalar
  tau - effective lifetime (s), double array [n_z x 1]
 
 This function takes into account the time-delay between light
 emitted at different altitudes. For auroral photons emitted
 downwards from 100 and 200 km altitude the photons emitted from
 200 km will arrive at the detector 100e3/3e8 = 0.333 ms later at
 the detector. This is a small time-shift but with the phase-shifts
 between auroral emissions varying at ~10 Hz this time-difference
 are getting close to the corresponding time-shifts.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../AURORA/sup-scripts/make_all_I_lambda.html" class="code" title="">make_all_I_lambda</a>	% Column-emission-calculations</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function I_lambda = q2colem(t,h,Q,A,tau)</a>
0002 <span class="comment">% Q2COLEM - Integrate volume excitation-rates to column emission</span>
0003 <span class="comment">%  Q2COLEM integrates altitude-time varying volume excitation-rates</span>
0004 <span class="comment">%  to column intensities, taking the speed-of-light into</span>
0005 <span class="comment">%  account.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% Calling:</span>
0008 <span class="comment">%  I_lambda = q2colem(t,h,Q,[A],[tau])</span>
0009 <span class="comment">% Input:</span>
0010 <span class="comment">%  t   - time (s), double array [1 x n_t]</span>
0011 <span class="comment">%  h   - distance along magnetic field (m), double array [n_z x 1]</span>
0012 <span class="comment">%  Q   - Volume excitation-rate (/m^3/s), double array [n_z x n_t]</span>
0013 <span class="comment">%  A   - Einstein coefficiend (1/s), double scalar</span>
0014 <span class="comment">%  tau - effective lifetime (s), double array [n_z x 1]</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% This function takes into account the time-delay between light</span>
0017 <span class="comment">% emitted at different altitudes. For auroral photons emitted</span>
0018 <span class="comment">% downwards from 100 and 200 km altitude the photons emitted from</span>
0019 <span class="comment">% 200 km will arrive at the detector 100e3/3e8 = 0.333 ms later at</span>
0020 <span class="comment">% the detector. This is a small time-shift but with the phase-shifts</span>
0021 <span class="comment">% between auroral emissions varying at ~10 Hz this time-difference</span>
0022 <span class="comment">% are getting close to the corresponding time-shifts.</span>
0023 
0024 
0025 <span class="comment">%  Copyright ï¿½ Bjorn Gustavsson 20190117, bjorn.gustavsson@uit.no</span>
0026 <span class="comment">%  This is free software, licensed under GNU GPL version 2 or later</span>
0027 
0028 
0029 c0    = 2.99792458e8;            <span class="comment">% Speed of light [m/s]</span>
0030 
0031 
0032 <span class="keyword">if</span> nargin &lt; 4 || isempty(A)
0033   A = 1;
0034 <span class="keyword">end</span>
0035 <span class="keyword">if</span> nargin &gt; 4 &amp; ~isempty(tau)
0036   Q = Q.*repmat(tau,1,size(Q,2));
0037 <span class="keyword">end</span>
0038 
0039 [t2,h2] = meshgrid(t,h);
0040 I = interp2(t,h,Q*A,t2-(h2-h(1))/c0,h2,<span class="string">'linear'</span>,0);
0041 I_lambda = trapz(h,I);</pre></div>
<hr><address>Generated on Mon 18-Nov-2019 14:53:30 by <strong>B.&nbsp;Gustavsson</strong> with <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>